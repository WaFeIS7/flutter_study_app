# «Які 3 дерева є у Flutter?».

- Widget Tree
- Element Tree
- Render Object Tree


На этапе сборки Flutter переводит виджеты, выраженные в коде, в соответствующее дерево элементов с одним элементом для каждого виджета. Каждый элемент представляет конкретный экземпляр виджета в заданном месте древовидной иерархии.

При создание Widget Tree, параллельно с ним создается Element Tree. 
Element Tree создает другое дерево обьектов RenderObjects

Widget Tree ->> Element Tree -->> Render Object Tree
 
Example: 
ButtonWidget ->> ButtonElement -->> RenderObject.


# Widget Tree
![image](https://user-images.githubusercontent.com/13627178/202922033-d0a5b570-8173-4003-9fb3-9619f28908c0.png)


# Element Tree
Для каждого виджета, который вы создаете в дереве виджетов, платформа Flutter создаст элемент в дереве элементов с помощью метода createElement(). Элемент представляет использование виджета для настройки определенного места в дереве. Этот элемент будет отображать, является ли виджет элементом без состояния(Stateless Element) или элементом с состоянием(Stateful Element). Элемент может измениться, если родительский виджет перестроится и создаст новый виджет для этого места.

![image](https://user-images.githubusercontent.com/13627178/202922013-38a41982-c774-45db-a0b5-440d48c14235.png)


# Render Object Tree
RenderObject — это тот, который виден на экране. Для каждого элемента в дереве элементов платформа Flutter создает RenderObject с помощью метода createRenderObject() в виджете. RenderObjects хранит основные сведения о виджетах, такие как положение дочерних элементов, базовый макет, протоколы рисования и т. д. Однако он не определяет, сколько дочерних элементов будет у родителя или где дочерний элемент будет расположен в декартовой системе. 
Следовательно, когда фреймворк Flutter рендерит или рисует ваш пользовательский интерфейс, он смотрит на дерево объектов рендеринга, а не на дерево виджетов или элементов, потому что именно дерево рендеринга управляет всеми свойствами виджета! Именно по этой причине повторное создание дерева объектов рендеринга является трудоемким и дорогостоящим процессом!

![image](https://user-images.githubusercontent.com/13627178/202922049-7ee51b49-64ad-4f18-9e05-dd5a236df59d.png)

Следовательно, когда фреймворк Flutter рендерит или рисует ваш пользовательский интерфейс, он смотрит на дерево объектов рендеринга, а не на дерево виджетов или элементов, потому что именно дерево рендеринга управляет всеми свойствами виджета! Именно по этой причине повторное создание дерева объектов рендеринга является трудоемким и дорогостоящим процессом!

Большинство виджетов  Flutter используют конкретный RenderObject именуемый RenderBox который использует 2D координаты. 
![image](https://user-images.githubusercontent.com/13627178/202922075-65810005-43e4-483e-b603-53f2d42caf57.png)

Дерево Элементов синхронизирует дерево RenderObject с деревом виджетов и сохраняются переходя от кадра к кадру. 
Большую часть времени RenderObjects можно использовать неоднократно что повышает продуктивность. 
Например. 
   Если цвет виджета меняется тот же виджет RenderObject можно использовать и раскрасить повторно.


Все что мы видим на экране это - RenderObject. 

## Материал взят: 
- [Docs Flutter](https://docs.flutter.dev/resources/architectural-overview#a2)
- [RenderObject](https://api.flutter.dev/flutter/rendering/RenderObject-class.html)
- [Medium](https://abhishekdoshi26.medium.com/deep-dive-into-flutter-trees-542f7395df5c)  
